<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/b4f6e9899f.js"></script>
    <link rel="stylesheet" href="./css/style.css" />
    <title>Video Ad</title>
  </head>
  <body>
    <div class="video-container" id="vContainer">
      <video
        id="starter-video"
        type="video/mp4"
        src="./video-1605702577.mp4"
        muted
        autoplay
        playsinline
      >
        Sorry, your browser doesn't support embedded videos.
      </video>
      <button id="play-btn" style="display: none">Play</button>
      <button id="skip-btn">Skip</button>
      <button id="mute-btn"><i class="fas fa-volume-mute"></i></button>
    </div>

    <script>
      ///////////////////////////////////////////////////////////////////////////////////////////////////////////
      ///////////////////////////////////////////////////////////////////////////////////////////////////////////

      // Redirect Link
      let redirectLocation =
        "https://www.brainpickings.org/?fbclid=IwAR2PMDwZzDngDNZiWa7bKswWXvQfsREiRy12a67KfHhsSOBi6y-w2yEpXao";
      // Video Link
      // let videoLink = "./video-1605777762.mp4";

      ///////////////////////////////////////////////////////////////////////////////////////////////////////////
      ///////////////////////////////////////////////////////////////////////////////////////////////////////////

      // Video Script
      let videoPlayer = document.querySelector("#starter-video");
      let skipBtn = document.querySelector("#skip-btn");
      let muteBtn = document.querySelector("#mute-btn");
      // videoPlayer.setAttribute("src", videoLink);

      videoPlayer.play();
      var playBtn = document.getElementById("play-btn");
      var playPromise = videoPlayer.play();

      playBtn.addEventListener("click", function () {
        videoPlayer.play();
      });

      // In browsers that don’t yet support this functionality,
      // playPromise won’t be defined.
      if (playPromise !== undefined) {
        playPromise
          .then(function () {
            // Automatic playback started!
            console.log("its working");
          })
          .catch(function (error) {
            // Automatic playback failed.
            // Show a UI element to let the user manually start playback.
            playBtn.style.display = "block";
          });
      }

      videoPlayer.onended = function () {
        window.location.replace(redirectLocation);
      };
      skipBtn.addEventListener("click", function () {
        window.location.replace(redirectLocation);
      });
      muteBtn.addEventListener("click", function () {
        if (videoPlayer.muted == true) {
          muteBtn.innerHTML = `<i class="fas fa-volume-up"></i>`;
          videoPlayer.muted = false;
        } else if (videoPlayer.muted == false) {
          muteBtn.innerHTML = `<i class="fas fa-volume-mute"></i>`;
          videoPlayer.muted = true;
        }
      });
    </script>
  </body>
</html>
